{"version":3,"file":"ThreeDScene.jsx","names":["_fiber","require","_react","_drei","_AgentCan","_interopRequireDefault","_jsxRuntime","e","__esModule","ThreeDScene","_ref","agents","activeAgentIndex","setActiveAgentIndex","rotationState","setRotationState","canvasRef","useRef","handleCanClick","index","prev","jsx","className","children","jsxs","Canvas","ref","shadows","dpr","attach","args","intensity","castShadow","position","color","PerspectiveCamera","makeDefault","fov","OrbitControls","enableZoom","enablePan","minPolarAngle","Math","PI","maxPolarAngle","minDistance","maxDistance","Suspense","fallback","map","agent","offset","isActive","onClick","id","Text","fontSize","anchorX","anchorY","font","name","Environment","preset","_default","exports"],"sources":["../../src/components/ThreeDScene.tsx"],"sourcesContent":["import { Canvas } from \"@react-three/fiber\";\r\nimport { useRef, useState, useEffect } from \"react\";\r\nimport { Suspense } from \"react\";\r\nimport { OrbitControls, PerspectiveCamera, Environment, Text } from \"@react-three/drei\";\r\nimport AgentCan from \"../models/AgentCan\";\r\nimport { AgentData } from \"../types/agent\";\r\n\r\ninterface ThreeDSceneProps {\r\n  agents: AgentData[];\r\n  activeAgentIndex: number;\r\n  setActiveAgentIndex: React.Dispatch<React.SetStateAction<number>>;\r\n  rotationState: number;\r\n  setRotationState: React.Dispatch<React.SetStateAction<number>>;\r\n}\r\n\r\nconst ThreeDScene = ({\r\n  agents,\r\n  activeAgentIndex,\r\n  setActiveAgentIndex,\r\n  rotationState,\r\n  setRotationState\r\n}: ThreeDSceneProps) => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  \r\n  const handleCanClick = (index: number) => {\r\n    if (index === activeAgentIndex) {\r\n      // If clicking the active agent, cycle through rotation states\r\n      setRotationState((prev) => (prev + 1) % 4);\r\n    } else {\r\n      // If clicking a new agent, make it active and reset rotation\r\n      setActiveAgentIndex(index);\r\n      setRotationState(0);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"h-full w-full\">\r\n      <Canvas \r\n        ref={canvasRef} \r\n        shadows \r\n        dpr={[1, 2]}\r\n        className=\"bg-gradient-to-b from-pastel-lavender/20 to-pastel-sky/20 rounded-xl\"\r\n      >\r\n        <fog attach=\"fog\" args={[\"#F1EBFD\", 5, 15]} />\r\n        <ambientLight intensity={0.7} />\r\n        <directionalLight\r\n          castShadow\r\n          position={[2, 2, 2]}\r\n          intensity={1.5}\r\n          shadow-mapSize-width={1024}\r\n          shadow-mapSize-height={1024}\r\n        />\r\n        <pointLight position={[-1, 1, -1]} intensity={0.8} color=\"#B794F4\" />\r\n        <pointLight position={[1, 1, -1]} intensity={0.8} color=\"#76E4F7\" />\r\n        \r\n        <PerspectiveCamera makeDefault position={[0, 1, 5]} fov={50} />\r\n        <OrbitControls \r\n          enableZoom={true} \r\n          enablePan={false}\r\n          minPolarAngle={Math.PI / 4}\r\n          maxPolarAngle={Math.PI / 2}\r\n          minDistance={3}\r\n          maxDistance={8}\r\n        />\r\n        \r\n        <Suspense fallback={null}>\r\n          {/* Display our agent cans */}\r\n          {agents.map((agent, index) => {\r\n            // Calculate position based on index and active state\r\n            let position: [number, number, number];\r\n            \r\n            if (index === activeAgentIndex) {\r\n              position = [0, 0, 0]; // Active agent in center\r\n            } else if (index < activeAgentIndex) {\r\n              // Position to the left and back in a subtle arc\r\n              const offset = activeAgentIndex - index;\r\n              position = [-1.5 * offset, -0.5 * offset, -1 * offset];\r\n            } else {\r\n              // Position to the right and back in a subtle arc\r\n              const offset = index - activeAgentIndex;\r\n              position = [1.5 * offset, -0.5 * offset, -1 * offset];\r\n            }\r\n            \r\n            return (\r\n              <AgentCan\r\n                key={agent.id}\r\n                position={position}\r\n                agent={agent}\r\n                isActive={index === activeAgentIndex}\r\n                onClick={() => handleCanClick(index)}\r\n                rotationState={index === activeAgentIndex ? rotationState : 0}\r\n              />\r\n            );\r\n          })}\r\n          \r\n          {/* Add 3D text for the active agent name */}\r\n          <Text\r\n            position={[0, -1.5, 0]}\r\n            fontSize={0.3}\r\n            color=\"#444\"\r\n            anchorX=\"center\"\r\n            anchorY=\"middle\"\r\n            font=\"/fonts/Inter-Bold.woff\"\r\n            material-toneMapped={false}\r\n          >\r\n            {agents[activeAgentIndex].name}\r\n          </Text>\r\n          \r\n          <Environment preset=\"park\" />\r\n        </Suspense>\r\n      </Canvas>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ThreeDScene;\r\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAEA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,SAAA,GAAAC,sBAAA,CAAAJ,OAAA;AAA0C,IAAAK,WAAA,GAAAL,OAAA;AAAA,SAAAI,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAW1C,IAAME,WAAW,GAAG,SAAdA,WAAWA,CAAAC,IAAA,EAMO;EAAA,IALtBC,MAAM,GAAAD,IAAA,CAANC,MAAM;IACNC,gBAAgB,GAAAF,IAAA,CAAhBE,gBAAgB;IAChBC,mBAAmB,GAAAH,IAAA,CAAnBG,mBAAmB;IACnBC,aAAa,GAAAJ,IAAA,CAAbI,aAAa;IACbC,gBAAgB,GAAAL,IAAA,CAAhBK,gBAAgB;EAEhB,IAAMC,SAAS,GAAG,IAAAC,aAAM,EAAoB,IAAI,CAAC;EAEjD,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,KAAa,EAAK;IACxC,IAAIA,KAAK,KAAKP,gBAAgB,EAAE;MAC9B;MACAG,gBAAgB,CAAC,UAACK,IAAI;QAAA,OAAK,CAACA,IAAI,GAAG,CAAC,IAAI,CAAC;MAAA,EAAC;IAC5C,CAAC,MAAM;MACL;MACAP,mBAAmB,CAACM,KAAK,CAAC;MAC1BJ,gBAAgB,CAAC,CAAC,CAAC;IACrB;EACF,CAAC;EAED,oBACE,IAAAT,WAAA,CAAAe,GAAA;IAAKC,SAAS,EAAC,eAAe;IAAAC,QAAA,eAC5B,IAAAjB,WAAA,CAAAkB,IAAA,EAACxB,MAAA,CAAAyB,MAAM;MACLC,GAAG,EAAEV,SAAU;MACfW,OAAO;MACPC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAE;MACZN,SAAS,EAAC,sEAAsE;MAAAC,QAAA,gBAEhF,IAAAjB,WAAA,CAAAe,GAAA;QAAKQ,MAAM,EAAC,KAAK;QAACC,IAAI,EAAE,CAAC,SAAS,EAAE,CAAC,EAAE,EAAE;MAAE,CAAE,CAAC,eAC9C,IAAAxB,WAAA,CAAAe,GAAA;QAAcU,SAAS,EAAE;MAAI,CAAE,CAAC,eAChC,IAAAzB,WAAA,CAAAe,GAAA;QACEW,UAAU;QACVC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;QACpBF,SAAS,EAAE,GAAI;QACf,wBAAsB,IAAK;QAC3B,yBAAuB;MAAK,CAC7B,CAAC,eACF,IAAAzB,WAAA,CAAAe,GAAA;QAAYY,QAAQ,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAE;QAACF,SAAS,EAAE,GAAI;QAACG,KAAK,EAAC;MAAS,CAAE,CAAC,eACrE,IAAA5B,WAAA,CAAAe,GAAA;QAAYY,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAE;QAACF,SAAS,EAAE,GAAI;QAACG,KAAK,EAAC;MAAS,CAAE,CAAC,eAEpE,IAAA5B,WAAA,CAAAe,GAAA,EAAClB,KAAA,CAAAgC,iBAAiB;QAACC,WAAW;QAACH,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;QAACI,GAAG,EAAE;MAAG,CAAE,CAAC,eAC/D,IAAA/B,WAAA,CAAAe,GAAA,EAAClB,KAAA,CAAAmC,aAAa;QACZC,UAAU,EAAE,IAAK;QACjBC,SAAS,EAAE,KAAM;QACjBC,aAAa,EAAEC,IAAI,CAACC,EAAE,GAAG,CAAE;QAC3BC,aAAa,EAAEF,IAAI,CAACC,EAAE,GAAG,CAAE;QAC3BE,WAAW,EAAE,CAAE;QACfC,WAAW,EAAE;MAAE,CAChB,CAAC,eAEF,IAAAxC,WAAA,CAAAkB,IAAA,EAACtB,MAAA,CAAA6C,QAAQ;QAACC,QAAQ,EAAE,IAAK;QAAAzB,QAAA,GAEtBZ,MAAM,CAACsC,GAAG,CAAC,UAACC,KAAK,EAAE/B,KAAK,EAAK;UAC5B;UACA,IAAIc,QAAkC;UAEtC,IAAId,KAAK,KAAKP,gBAAgB,EAAE;YAC9BqB,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;UACxB,CAAC,MAAM,IAAId,KAAK,GAAGP,gBAAgB,EAAE;YACnC;YACA,IAAMuC,MAAM,GAAGvC,gBAAgB,GAAGO,KAAK;YACvCc,QAAQ,GAAG,CAAC,CAAC,GAAG,GAAGkB,MAAM,EAAE,CAAC,GAAG,GAAGA,MAAM,EAAE,CAAC,CAAC,GAAGA,MAAM,CAAC;UACxD,CAAC,MAAM;YACL;YACA,IAAMA,OAAM,GAAGhC,KAAK,GAAGP,gBAAgB;YACvCqB,QAAQ,GAAG,CAAC,GAAG,GAAGkB,OAAM,EAAE,CAAC,GAAG,GAAGA,OAAM,EAAE,CAAC,CAAC,GAAGA,OAAM,CAAC;UACvD;UAEA,oBACE,IAAA7C,WAAA,CAAAe,GAAA,EAACjB,SAAA,WAAQ;YAEP6B,QAAQ,EAAEA,QAAS;YACnBiB,KAAK,EAAEA,KAAM;YACbE,QAAQ,EAAEjC,KAAK,KAAKP,gBAAiB;YACrCyC,OAAO,EAAE,SAATA,OAAOA,CAAA;cAAA,OAAQnC,cAAc,CAACC,KAAK,CAAC;YAAA,CAAC;YACrCL,aAAa,EAAEK,KAAK,KAAKP,gBAAgB,GAAGE,aAAa,GAAG;UAAE,GALzDoC,KAAK,CAACI,EAMZ,CAAC;QAEN,CAAC,CAAC,eAGF,IAAAhD,WAAA,CAAAe,GAAA,EAAClB,KAAA,CAAAoD,IAAI;UACHtB,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAE;UACvBuB,QAAQ,EAAE,GAAI;UACdtB,KAAK,EAAC,MAAM;UACZuB,OAAO,EAAC,QAAQ;UAChBC,OAAO,EAAC,QAAQ;UAChBC,IAAI,EAAC,wBAAwB;UAC7B,uBAAqB,KAAM;UAAApC,QAAA,EAE1BZ,MAAM,CAACC,gBAAgB,CAAC,CAACgD;QAAI,CAC1B,CAAC,eAEP,IAAAtD,WAAA,CAAAe,GAAA,EAAClB,KAAA,CAAA0D,WAAW;UAACC,MAAM,EAAC;QAAM,CAAE,CAAC;MAAA,CACrB,CAAC;IAAA,CACL;EAAC,CACN,CAAC;AAEV,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,cAEavD,WAAW","ignoreList":[]}